(function(e){function t(t){for(var r,i,n=t[0],l=t[1],c=t[2],u=0,m=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},o=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"33d7":function(e,t,a){},"379f":function(e,t,a){"use strict";a("33d7")},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),s=a("7496"),o=a("f6c4"),i=function(){var e=this,t=e._self._c;return t(s["a"],[t(o["a"],[t("router-view")],1)],1)},n=[],l={name:"App"},c=l,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null),m=u.exports,p=a("8c4f"),h=a("8336"),f=a("b0af"),g=a("62ad"),b=a("a523"),v=a("4bd4"),y=a("0fd9"),_=a("8654"),x=function(){var e=this,t=e._self._c;return t(b["a"],{staticClass:"fill-height",attrs:{fluid:""}},[t(y["a"],{attrs:{align:"center",justify:"center"}},[t(g["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[t(f["a"],{staticClass:"pa-5 pt-16",attrs:{outlined:""}},[t("h4",{staticClass:"text-h4 text-center mb-5"},[e._v("Admin - Login")]),t(v["a"],{ref:"form",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t(y["a"],{attrs:{justify:"start"}},[t(g["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Username",placeholder:"joime1243",outlined:"","prepend-inner-icon":"mdi-account","hide-details":"",tabindex:"1",autofocus:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t(g["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Password",outlined:"","prepend-inner-icon":"mdi-lock",tabindex:"2","hide-details":"",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t(g["a"],{staticClass:"mt-0 pt-0",attrs:{cols:"12",sm:"10"}},[t("span",{staticClass:"error--text caption font-weight-bold text-capitalize"},[e._v(" "+e._s(e.error)+" ")])]),t(g["a"],{staticClass:"pt-0",attrs:{cols:"12"}},[t(h["a"],{attrs:{type:"submit",block:"",elevation:"0",large:"",tabindex:"3",color:"primary",loading:e.loading}},[e._v(" Login ")])],1)],1)],1)],1)],1)],1)],1)},w=[],k=a("cee4"),U={name:"Login",data(){return{form:{username:"",password:""},loading:!1,error:null}},methods:{async login(){try{this.loading=!0;const e=await k["a"].post("/api/admin/login",{...this.form});this.loading=!1,localStorage.setItem("authorization",e.data.token),this.$router.replace("/home")}catch(e){this.loading=!1,this.error=e.response.data.message}}}},C=U,$=Object(d["a"])(C,x,w,!1,null,null,null),j=$.exports,N=function(){var e=this,t=e._self._c;return t("router-view")},I=[],S={name:"Home"},P=S,z=Object(d["a"])(P,N,I,!1,null,"43180161",null),O=z.exports,A=a("a609"),L=a("8fea"),q=a("ce7e"),M=a("132d"),F=a("3129"),D=function(){var e=this,t=e._self._c;return t(b["a"],{staticClass:"container",attrs:{fluid:""}},[t(y["a"],{attrs:{justify:"center","align-items":"center"}},[t(g["a"],{attrs:{cols:"12",sm:"10",md:"10"}},[t(y["a"],{staticClass:"py-5 px-3",attrs:{justify:"space-between","align-items":"center"}},[t("h4",{staticClass:"text-h4"},[e._v("Manage Users")]),t(A["a"],[t(h["a"],{attrs:{elevation:"0",color:"primary",small:""},on:{click:e.create}},[t(M["a"],{attrs:{color:"white"}},[e._v("mdi-plus")]),e._v(" Create New ")],1),t(h["a"],{attrs:{color:"error",elevation:"0",small:"",disabled:!e.selected.length,title:"remove selected"},on:{click:e.removeSelected}},[t(M["a"],{attrs:{color:"white"}},[e._v("mdi-delete")])],1)],1)],1)],1),!e.table_loading||e.users.length?t(g["a"],{attrs:{cols:"12",sm:"10",md:"10"}},[t(L["a"],{attrs:{"item-key":"id","show-select":"",headers:e.headers,items:e.users,"items-per-page":5},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(h["a"],{attrs:{icon:"",color:"primary"},on:{click:function(t){return e.edit(a.id)}}},[t(M["a"],[e._v("mdi-pencil")])],1)]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1):t(g["a"],{attrs:{cols:"12",sm:"10",md:"10"}},[t(F["a"],{attrs:{type:"table"}})],1),e.error?t(g["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"10",md:"10"}},[t("p",{staticClass:"caption error--text text-center"},[e._v(e._s(e.error))])]):e._e(),t(g["a"],{attrs:{cols:"12",sm:"10",md:"10"}},[t(q["a"])],1),t(g["a"],{attrs:{cols:"12",sm:"10",md:"10"}},[t(h["a"],{attrs:{color:"error",elevation:"0"},on:{click:e.logout}},[t(M["a"],[e._v("mdi-logout")]),e._v(" Logout ")],1)],1)],1)],1)},E=[],T=(a("14d9"),{name:"Manage",data(){return{users:[],table_loading:!1,selected:[],error:null,headers:[{text:"ID",align:"start",value:"id"},{text:"Username",value:"username"},{text:"Email",value:"email"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Address",value:"address"},{text:"Phone Number",value:"contactPhoneNumber"},{text:"Actions",value:"actions"}]}},methods:{logout(){localStorage.removeItem("authorization"),this.$router.push("/login")},async getUsers(){try{this.table_loading=!0;const e=await k["a"].get("/api/admin/users",{headers:{Authorization:localStorage.getItem("authorization")}});this.table_loading=!1,this.users=e.data}catch(e){this.table_loading=!1}},async removeSelected(){try{await k["a"].post("/api/admin/users/remove",{ids:this.selected.map(e=>e.id)},{headers:{Authorization:localStorage.getItem("authorization")}}),this.selected=[],this.getUsers()}catch(e){this.error=e.response.data.message}},create(){this.$router.push("create")},edit(e){this.$router.push("update/"+e)}},async mounted(){this.getUsers()}}),J=T,B=(a("379f"),Object(d["a"])(J,D,E,!1,null,"3a0ab922",null)),H=B.exports,G=function(){var e=this,t=e._self._c;return t(b["a"],[t(y["a"],{attrs:{justify:"center","align-items":"center"}},[t(g["a"],{staticClass:"mt-5",attrs:{cols:"12",sm:"10",md:"6"}},[e.getUserLoading?t(F["a"],{attrs:{type:"list-item-three-line, article, article, actions"}}):t(f["a"],{staticClass:"pa-10 pt-12",attrs:{outlined:""}},[t(g["a"],{staticClass:"px-0",attrs:{cols:"12"}},[t(h["a"],{attrs:{outlined:"",small:"",color:"secondary"},on:{click:e.back}},[t(M["a"],[e._v("mdi-arrow-left")]),e._v(" Back ")],1)],1),t(g["a"],{staticClass:"px-0 py-3",attrs:{cols:"12"}},[t("h4",{staticClass:"text-h4"},[e._v(e._s(e.isInUpdate?"Update":"Create")+" User")])]),t(v["a"],{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[t(y["a"],[t(g["a"],{attrs:{cols:"12",sm:"6"}},[t(_["a"],{attrs:{label:"First name",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1),t(g["a"],{attrs:{cols:"12",sm:"6"}},[t(_["a"],{attrs:{label:"Last name",outlined:"","hide-details":"",dense:"",required:""},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1)],1),t(y["a"],[t(g["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Address",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),t(y["a"],[t(g["a"],{attrs:{cols:"12",sm:"6"}},[t(_["a"],{attrs:{label:"Postcode",type:"number",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1),t(g["a"],{attrs:{cols:"12",sm:"6"}},[t(_["a"],{attrs:{label:"Contact Phone Number",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.contactPhoneNumber,callback:function(t){e.$set(e.form,"contactPhoneNumber",t)},expression:"form.contactPhoneNumber"}})],1)],1),e.isInUpdate?e._e():t(y["a"],[t(g["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Email",type:"email",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t(y["a"],[e.isInUpdate?e._e():t(g["a"],{attrs:{cols:"12",sm:"6"}},[t(_["a"],{attrs:{label:"Username",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t(g["a"],{attrs:{cols:"12",sm:e.isInUpdate?"12":"6"}},[t(_["a"],{attrs:{label:"Password",type:"password",required:"",outlined:"","hide-details":"",dense:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e.error?t(y["a"],[t(g["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"10",md:"10"}},[t("p",{staticClass:"caption error--text"},[e._v(e._s(e.error))])])],1):e._e(),t(y["a"],[t(g["a"],{attrs:{cols:"12"}},[t(h["a"],{attrs:{type:"submit",color:"primary",elevation:"0",loading:e.loading}},[e._v(" Submit ")])],1)],1)],1)],1)],1)],1)],1)},K=[],Q={name:"Create",data(){return{error:null,loading:!1,isInUpdate:!1,getUserLoading:!1,form:{firstName:"",lastName:"",address:"",postCode:"",contactPhoneNumber:"",email:"",username:"",password:""}}},methods:{back(){this.$router.back()},async submitForm(){if(this.isInUpdate){const{id:e}=this.$route.params;return this.updateUser(e)}return this.createUser()},async getUser(e){try{this.getUser=!0;const t=await k["a"].get("/api/admin/users/"+e,{headers:{Authorization:localStorage.getItem("authorization")}});this.getUserLoading=!1,this.form={...t.data}}catch(t){this.getUserLoading=!1,this.$router.replace("/home/manage")}},async createUser(){try{this.error=null,this.loading=!0,await k["a"].post("/api/admin/users/create",{...this.form},{headers:{Authorization:localStorage.getItem("authorization")}}),this.loading=!1,this.$router.replace("/home/manage")}catch(e){this.loading=!1,this.error=e.response.data.message}},async updateUser(e){try{this.error=null,this.loading=!0;const{username:t,email:a,id:r,...s}=this.form;console.log({username:t,email:a,_id:r}),await k["a"].post("/api/admin/users/update/"+e,{...s},{headers:{Authorization:localStorage.getItem("authorization")}}),this.loading=!1,this.$router.replace("/home/manage")}catch(t){this.loading=!1,this.error=t.response.data.message}}},mounted(){this.isInUpdate=this.$router.history.current.path.includes("update");const{id:e}=this.$route.params;this.isInUpdate&&this.getUser(e)}},R=Q,V=Object(d["a"])(R,G,K,!1,null,null,null),W=V.exports;r["a"].use(p["a"]);const X=[{path:"/login",component:j},{path:"/home",component:O,beforeEnter:async(e,t,a)=>{if(!localStorage.getItem("authorization"))return a("/");try{await k["a"].get("/api/admin/users",{headers:{Authorization:localStorage.getItem("authorization")}}),a()}catch(r){return a("/")}},children:[{path:"manage",component:H},{path:"create",component:W},{path:"update/:id",component:W},{path:"",redirect:"manage"}]},{path:"*",redirect:"/login"}],Y=new p["a"]({mode:"history",routes:X});var Z=Y,ee=a("f309");r["a"].use(ee["a"]);var te=new ee["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:Z,vuetify:te,render:e=>e(m)}).$mount("#app")}});
//# sourceMappingURL=app.fea509b3.js.map